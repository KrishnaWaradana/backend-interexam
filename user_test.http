### 0.0 GET ALL ROLES (UNTUK DROPDOWN ROLE)
# Tujuan: Memverifikasi opsi Role yang valid.
GET http://localhost:5000/api/v1/admin/roles

---

### 0.5 GET ALL SUBJECTS (UNTUK DROPDOWN KEAHLIAN)
# Tujuan: Memverifikasi daftar Subjects tersedia untuk dropdown.
GET http://localhost:5000/api/v1/admin/subjects

---

### 1. TEST CREATE (POST)
# Tujuan: Menambah User Baru (CREATE) dan membuat relasi keahlian.
# CATATAN PENTING: Ganti email_user setiap kali diuji (atau akan mendapat 409 Conflict).
POST http://localhost:5000/api/v1/admin/user
Content-Type: application/json

{
  "username": "Natris",
  "email_user": "narendraarya@gmail.com",
  "password": "PasswordTest123",
  "nama_user": "Narendra Arya",
  "role": "Contributor", 
  "phone": "081234567890",
  "foto": "path/ke/foto/102020.jpg",
  "subject_ids": [1] 
  
}



### 2. TEST READ ALL (GET)
# Tujuan: Memastikan User yang baru dibuat muncul di daftar.
GET http://localhost:5000/api/v1/admin/users

---

### 3. TEST UPDATE (PUT)
# Tujuan: Mengubah data user dasar DAN memperbarui relasi keahlian.
# PENTING: Ganti ID di URL (/user/X) dengan ID yang dihasilkan oleh TEST 1.
# Ganti angka 1 dengan ID user yang sebenarnya (misal: 37, 38, dll.)
PUT http://localhost:5000/api/v1/admin/user/2
Content-Type: application/json

{
  "nama_user": "mangadi",
  "role": "Validator", 
  "phone": "0899887766",
  "foto": "path/ke/foto/update_admin.jpg",
  "subject_ids": [2] 
  
}



### 4. TEST DELETE (DELETE)
# Tujuan: Menghapus user yang telah diupdate.
# PENTING: Ganti ID di URL (/user/X) dengan ID yang kamu gunakan di TEST 3.
DELETE http://localhost:5000/api/v1/admin/user/1


### 1. CREATE SUBJECT (POST)
# Tujuan: Membuat Subject baru
POST http://localhost:5000/api/v1/admin/subject
Content-Type: application/json

{
  "nama_subject": "PKWU",
  "keterangan": "Muatan Lokal"
}


### 2. READ ALL SUBJECTS (GET)
# Tujuan: Memastikan Subject yang baru dibuat muncul (Harusnya 3 Subject: Mat, Ipa, Fisika Dasar)
GET http://localhost:5000/api/v1/admin/subjects

---

### 3. TEST DUPLICATE (POST)
# Tujuan: Menguji validasi 409 Conflict. Ini harus gagal.
POST http://localhost:5000/api/v1/admin/subject
Content-Type: application/json

{
  "nama_subject": "Fisika Dasar",
  "keterangan": "Ini harus gagal"
}


### 4. UPDATE SUBJECT (PUT)
# PENTING: Ganti ID X dengan ID yang dibuat di TEST 1 (misalnya ID 3).
PUT http://localhost:5000/api/v1/admin/subject/2
Content-Type: application/json

{
  "nama_subject": "Biologi Terapan",
  "keterangan": "Mata pelajaran Biologi Terapan"
}



### 5. DELETE SUBJECT (DELETE)
# PENTING: Ganti ID X dengan ID yang diupdate di TEST 4 (misalnya ID 3).
DELETE http://localhost:5000/api/v1/admin/subject/1

### ==========================================
### BAGIAN TEST TOPIC
### ==========================================

### 6. CREATE TOPIC (POST)
POST http://localhost:5000/api/v1/topics
Content-Type: application/json

{
  "nama_topics": "Ide Usaha",
  "id_subjects": 8, 
  "id_jenjang": 1,
  "keterangan": "Materi Ide Kreatif dan Usaha"
}

### 7. READ ALL TOPICS (GET)
GET http://localhost:5000/api/v1/topics

### 8. UPDATE TOPIC (PUT) berdasarkan ID Topik
PUT http://localhost:5000/api/v1/topics/4
Content-Type: application/json

{
  "nama_topics": "past-tenses",
  "id_subjects": 7,
  "id_jenjang": 5,
  "keterangan": "Revisi materi Bahasa Inggris"
}

### 9. DELETE TOPIC (DELETE)
# Hapus topik berdasarkan ID Topik
DELETE http://localhost:5000/api/v1/topics/3

### 10. TEST DUPLICATE TOPIC (POST)
# Tujuan: Menguji validasi duplikasi. 
POST http://localhost:5000/api/v1/topics
Content-Type: application/json

{
  "nama_topics": "Ide Usaha",
  "id_subjects": 8, 
  "id_jenjang": 5,
  "keterangan": "Coba duplikat, harusnya gagal"
}

### 1. READ ALL JENJANG (GET)
# Cek data awal (harus ada SD, SMP, SMA dari seeding Prisma Studio)
GET http://localhost:5000/api/v1/admin/jenjang

### 2. CREATE JENJANG BARU (POST)
# Kita coba tambahkan jenjang baru "S2 Magister"
POST http://localhost:5000/api/v1/admin/jenjang
Content-Type: application/json

{
  "nama_jenjang": "S2 Magister",
  "keterangan": "Program Pascasarjana"
}

### 3. TEST DUPLICATE JENJANG (POST)
# Coba tambahkan "S2 Magister" LAGI. Harusnya GAGAL (409 Conflict).
# Case insensitive test: "s2 magister" juga harus gagal.
POST http://localhost:5000/api/v1/admin/jenjang
Content-Type: application/json

{
  "nama_jenjang": "s2 magister",
  "keterangan": "Coba duplikat huruf kecil"
}

### 4. UPDATE JENJANG (PUT)
# Ganti ID X dengan ID "S2 Magister" yang baru dibuat (Misal ID 7)
# Kita ubah jadi "S3 Doktor"
PUT http://localhost:5000/api/v1/admin/jenjang/7
Content-Type: application/json

{
  "nama_jenjang": "S3 Doktor",
  "keterangan": "Program Doktoral"
}

### 5. TEST DUPLICATE UPDATE (PUT)
# Coba ubah "S3 Doktor" menjadi "SD" (yang sudah ada).
# Harusnya GAGAL (409 Conflict).
PUT http://localhost:5000/api/v1/admin/jenjang/7
Content-Type: application/json

{
  "nama_jenjang": "SD",
  "keterangan": "Coba ubah jadi SD"
}

### 6. DELETE JENJANG (DELETE)
# Hapus Jenjang "S3 Doktor" (ID 7)
DELETE http://localhost:5000/api/v1/admin/jenjang/7





### ==========================================
### FASE 1: TEST LOOKUP (DROPDOWNS)
### ==========================================

### 1. GET MATA PELAJARAN
GET http://localhost:5000/api/v1/contributor/lookup/subjects

---

### 2. GET LEVEL KESULITAN
GET http://localhost:5000/api/v1/contributor/lookup/levels

---

### 3. GET TOPIK BERDASARKAN SUBJECT ID
# ‚ö†Ô∏è Ganti ID 1 dengan ID Mata Pelajaran yang ada.
GET http://localhost:5000/api/v1/contributor/lookup/topics/1

### ==========================================
### FASE 2: TEST CREATE SOAL (POST JSON)
### ==========================================

### 4. TEST CREATE SOAL (AJUKAN) - TANPA GAMBAR
# Tujuan: Simpan status 'need_verification' (gunakan action_type: Ajukan).
POST http://localhost:5000/api/v1/contributor/question
Content-Type: application/json

{
  "tipe_soal": "pilihan_ganda",
  "text_soal": "Sebutkan nama Ibu Kota negara Indonesia saat ini?",
  "id_mata_pelajaran": "1",
  "id_topik": "1",
  "level_kesulitan": "mudah",
  "pembahasan_umum": "DKI Jakarta adalah ibu kota negara Republik Indonesia.",
  "action_type": "Ajukan",
  "opsi_jawaban": "[{\"text\":\"Bandung\",\"is_correct\":false},{\"text\":\"DKI Jakarta\",\"is_correct\":true},{\"text\":\"Surabaya\",\"is_correct\":false}]"
}



### 5. TEST CREATE SOAL (DRAFT) - TANPA GAMBAR
# Tujuan: Simpan status 'draft' (gunakan action_type: Simpan).
POST http://localhost:5000/api/v1/contributor/question
Content-Type: application/json

{
  "tipe_soal": "multi_jawaban",
  "text_soal": "Planet manakah yang termasuk planet luar?",
  "id_mata_pelajaran": "1",
  "id_topik": "5",
  "level_kesulitan": "sedang",
  "pembahasan_umum": "Planet luar adalah planet raksasa gas, yaitu Jupiter, Saturnus, Uranus, dan Neptunus.",
  "action_type": "Simpan",
  "opsi_jawaban": "[{\"text\":\"Mars\",\"is_correct\":false},{\"text\":\"Jupiter\",\"is_correct\":true},{\"text\":\"Merkurius\",\"is_correct\":false},{\"text\":\"Saturnus\",\"is_correct\":true}]"
}


### 6. TEST VALIDASI GAGAL (Missing Required Field)
# Tujuan: Memverifikasi validasi 400 Bad Request.
POST http://localhost:5000/api/v1/contributor/question
Content-Type: application/json

{
  "tipe_soal": "pilihan_ganda",
  "text_soal": "", 
  "id_mata_pelajaran": "1",
  "id_topik": "5",
  "level_kesulitan": "sedang",
  "pembahasan_umum": "Pembahasan",
  "action_type": "Ajukan",
  "opsi_jawaban": "[{\"text\":\"A\",\"is_correct\":true}]"
}



### Variabel Global untuk Testing
# Contributor ID akan diambil secara otomatis (findFirst Contributor/Admin)
@subjectIdYangAdaValidatornya = 1   # Ganti dengan Subject ID yang memiliki Validator di DB Anda
@uniqueId = 135                      # ID unik untuk testing

### -----------------------------------------------------------
### 1. TEST SUKSES: Pembuatan Soal dan Filter Validator
# @name testSubmitSuccessDebugDB
# Menguji:
# 1. Soal berhasil dibuat (Status 201).
# 2. Logic Filter Validator berfungsi (Array validators tidak kosong).
# 3. Contributor ID terambil dari DB.

POST http://localhost:5000/api/v1/contributor/question 
Content-Type: application/json 
 
{ 
  "tipe_soal": "pilihan_ganda",
  "text_soal": "Soal Sukses Debug DB ID: {{uniqueId}}",
  "id_mata_pelajaran": "{{subjectIdYangAdaValidatornya}}",
  "id_topik": "1",
  "id_subtopik": "1",
  "level_kesulitan": "sedang",
  "pembahasan_umum": "Pengujian mode debug database.",
  "action_type": "Ajukan", 
  "opsi_jawaban": "[{\"text\":\"Opsi A\",\"is_correct\":true}, {\"text\":\"Opsi B\",\"is_correct\":false}]"
}

### -----------------------------------------------------------
### 2. TEST DRAFT: Simpan sebagai Draft (Validator list harus kosong)
# @name testSaveDraftDebugDB
# Menguji: Status Soal = draft dan Validator list kosong.

POST http://localhost:5000/api/v1/contributor/question 
Content-Type: application/json 

{ 
  "tipe_soal": "pilihan_ganda",
  "text_soal": "Soal Draft Debug DB ID: {{uniqueId}}-Draft",
  "id_mata_pelajaran": "{{subjectIdYangAdaValidatornya}}",
  "id_topik": "1",
  "id_subtopik": "1",
  "level_kesulitan": "mudah",
  "pembahasan_umum": "Pengujian simpan draft.",
  "action_type": "Draft", 
  "opsi_jawaban": "[{\"text\":\"Opsi X\",\"is_correct\":true}, {\"text\":\"Opsi Y\",\"is_correct\":false}]"
}
### Variabel Global untuk Testing
# Contributor ID akan diambil secara otomatis (findFirst Contributor/Admin dari DB)
@subjectIdYangAdaValidatornya = 1   # Ganti dengan Subject ID yang ada di tabel Topics Anda
@uniqueId = 137                      # ID unik untuk testing

### -----------------------------------------------------------
### 1. TEST ADD (POST): Pembuatan Soal dan Filter Validator
# @name testSubmitSuccessDebugDB
# Menguji:
# 1. Soal berhasil dibuat (Status 201).
# 2. Logic Filter Validator berfungsi (Array validators tidak kosong).

POST http://localhost:5000/api/v1/contributor/question 
Content-Type: application/json 
 
{ 
  "tipe_soal": "pilihan_ganda",
  "text_soal": "Soal Sukses Debug DB ID: {{uniqueId}}",
  "id_mata_pelajaran": "{{subjectIdYangAdaValidatornya}}",
  "id_topik": "1",
  "id_subtopik": "1",
  "level_kesulitan": "sedang",
  "pembahasan_umum": "Pengujian mode debug database.",
  "action_type": "Ajukan", 
  "opsi_jawaban": "[{\"text\":\"Opsi A\",\"is_correct\":true}, {\"text\":\"Opsi B\",\"is_correct\":false}]"
}

### -----------------------------------------------------------
### 2. TEST READ (GET): Ambil Daftar Soal dan Statistik Dashboard
# @name testReadQuestionsDebugDB
# Menguji: Mengambil semua soal yang dibuat oleh Contributor ID yang terdeteksi otomatis dari DB.

GET http://localhost:5000/api/v1/contributor/my-questions


### Variabel Global untuk Testing
# üö® Ganti dengan ID Soal yang SUDAH ADA di DB Anda (misalnya ID 7 atau 8, yang dibuat oleh Contributor ID 6)
@existingQuestionId = 8 
@subjectIdYangAdaValidatornya = 1 
@uniqueId = 140

### -----------------------------------------------------------
### 1. TEST ADD (POST): Pembuatan Soal Baru (CREATE)
# @name testSubmitSuccessDebugDB
# Ekspektasi: Status 201 Created. Soal baru dibuat.

POST http://localhost:5000/api/v1/contributor/question 
Content-Type: application/json 
 
{ 
  "tipe_soal": "pilihan_ganda",
  "text_soal": "Soal BARU ID: {{uniqueId}} (TEST CREATE)",
  "id_mata_pelajaran": "{{subjectIdYangAdaValidatornya}}",
  "id_topik": "1",
  "level_kesulitan": "sedang",
  "pembahasan_umum": "Pengujian mode debug database.",
  "action_type": "Draft", 
  "opsi_jawaban": "[{\"text\":\"Opsi A\",\"is_correct\":true}, {\"text\":\"Opsi B\",\"is_correct\":false}]"
}

### -----------------------------------------------------------
### 2. TEST UPDATE (PUT): Edit Soal Menggunakan ID yang Sudah Ada
# @name testUpdateQuestion
# Menguji: Mengubah teks, level, dan opsi jawaban soal ID @existingQuestionId
# Ekspektasi: Status 200 OK. Status soal diubah menjadi 'need_verification'.

PUT http://localhost:5000/api/v1/contributor/question/{{existingQuestionId}} 
Content-Type: application/json 
 
{ 
  "tipe_soal": "pilihan_ganda",
  "text_soal": "UPDATE: Soal ID {{existingQuestionId}} FINAL DIUBAH! (Level Sulit)",
  "id_mata_pelajaran": "{{subjectIdYangAdaValidatornya}}",
  "id_topik": "1",
  "level_kesulitan": "sulit", 
  "pembahasan_umum": "Pembahasan FINAL setelah UPDATE.",
  "action_type": "Ajukan", 
  "opsi_jawaban": "[{\"text\":\"Jawaban FINAL UPDATE OK\",\"is_correct\":true}, {\"text\":\"Jawaban lama dihapus\",\"is_correct\":false}]"
}

### -----------------------------------------------------------
### 3. TEST READ (GET): Verifikasi Data Setelah Update
# @name testReadQuestionsDebugDB
# Ekspektasi: Cek array data, soal ID {{existingQuestionId}} harus memiliki status 'need_verification' dan level 'sulit'.

GET http://localhost:5000/api/v1/contributor/my-questions

@questionIdToDelete = 70

### -----------------------------------------------------------
### 1. TEST DELETE (DELETE)
# @name testDeleteQuestion
# Menguji: Menghapus soal dan semua relasinya (jawaban, attachment).

DELETE http://localhost:5000/api/v1/contributor/question/{{questionIdToDelete}}

### ==============================================
### KONFIGURASI TESTING
### ==============================================
@baseUrl = http://localhost:5000/api/v1
# GANTI ANGKA DI BAWAH INI DENGAN ID SOAL YANG BARU DIBUAT DI PRISMA STUDIO
@idSoal = 1


### ==============================================
### VARIABLE GLOBAL
### ==============================================
@baseUrl = http://localhost:5000/api/v1
# Ganti dengan ID Soal yang ingin dites (lihat hasil dashboard dulu)
@idSoal = 1
# Ganti dengan ID Paket yang ada di DB
@idPaket = 1

### ==============================================
### 1. DASHBOARD: SIMULASI SEBAGAI "VALIDATOR"
### ==============================================
GET {{baseUrl}}/bank-soal?as_role=validator
Content-Type: application/json


### ==============================================
### 2. DASHBOARD: SIMULASI SEBAGAI "ADMIN"
### ==============================================
GET {{baseUrl}}/bank-soal?as_role=admin
Content-Type: application/json


### ==============================================
### 3. LIHAT DETAIL SOAL
### ==============================================
GET {{baseUrl}}/bank-soal/{{idSoal}}
Content-Type: application/json


### ==============================================
### 4. VALIDASI: SETUJUI SOAL (APPROVE)
### ==============================================
# Sesuai Schema: Status harus "disetujui" (huruf kecil)
PUT {{baseUrl}}/bank-soal/{{idSoal}}
Content-Type: application/json

{
    "status": "disetujui"
}


### ==============================================
### 5. VALIDASI: TOLAK SOAL (REJECT + CATATAN)
### ==============================================
# Sesuai Schema: Status harus "ditolak" (huruf kecil)
PUT {{baseUrl}}/bank-soal/{{idSoal}}
Content-Type: application/json

{
    "status": "ditolak",
    "catatan_revisi": "Gambar soal terlalu buram dan opsi jawaban A ambigu. Mohon diperbaiki."
}


### ==============================================
### 6. KEMBALIKAN KE STATUS VERIFIKASI (RESET)
### ==============================================
# Jika ingin mengetes ulang, kembalikan statusnya
PUT {{baseUrl}}/bank-soal/{{idSoal}}
Content-Type: application/json

{
    "status": "need_verification"
}


# ### ==============================================
# ### 7. EDIT SOAL & MASUKKAN KE PAKET (OPSIONAL)
# ### ==============================================
# PUT {{baseUrl}}/bank-soal/{{idSoal}}
# Content-Type: application/json

# {
#     "text_soal": "Soal ini sudah diedit oleh Validator (V2)",
#     "level_kesulitan": "sulit",
#     "id_paket_soal": {{idPaket}}
# }


### ==============================================
### 8. HAPUS SOAL
### ==============================================
DELETE {{baseUrl}}/bank-soal/{{idSoal}}
Content-Type: application/json


### ==============================================
### VARIABLE GLOBAL
### ==============================================
@baseUrl = http://localhost:5000/api/v1

# PENTING: Ganti angka '1' di bawah ini dengan ID Topik yang SUDAH ADA di database Anda.
# Jika belum punya topik, buat dulu lewat endpoint Topik atau manual di DB.
@idTopik = 1

# Variable ID Subtopik (Akan dipakai untuk tes Get Detail, Update, Delete)
# Ganti angka ini manual setelah Anda berhasil melakukan CREATE (Request No 1)
@idSubTopik = 1


### ==============================================
### 1. BUAT SUB-TOPIK BARU (INCLUDE HTML DESC)
### ==============================================
# Controller akan otomatis mendeteksi User Lokal (Admin/User pertama) sebagai pembuatnya.
POST {{baseUrl}}/subtopics
Content-Type: application/json

{
    "nama_subtopics": "Struktur & Fungsi Sel",
    "id_topics": {{idTopik}},
    "keterangan": "Materi Dasar Biologi",
    "deskripsi": "<div><h3>Pengenalan Sel</h3><p>Sel adalah unit struktural dan fungsional terkecil dari makhluk hidup.</p><ul><li><b>Prokariotik:</b> Tidak memiliki membran inti.</li><li><b>Eukariotik:</b> Memiliki membran inti.</li></ul></div>"
}


### ==============================================
### 2. LIHAT SEMUA SUB-TOPIK
### ==============================================
# Menampilkan semua sub-topik tanpa filter
GET {{baseUrl}}/subtopics
Content-Type: application/json


### ==============================================
### 3. FILTER SUB-TOPIK BERDASARKAN TOPIK INDUK
### ==============================================
# Hanya menampilkan sub-topik milik Topik ID tertentu
GET {{baseUrl}}/subtopics?id_topics={{idTopik}}
Content-Type: application/json


### ==============================================
### 4. GET DETAIL SUB-TOPIK (PREVIEW MATERI)
### ==============================================
# Gunakan ini di Frontend untuk halaman Cover Paket Soal.
# Response field 'deskripsi' berisi HTML yang siap di-render.
GET {{baseUrl}}/subtopics/{{idSubTopik}}
Content-Type: application/json


### ==============================================
### 5. UPDATE SUB-TOPIK
### ==============================================
# Mengubah nama atau isi materi (deskripsi)
PUT {{baseUrl}}/subtopics/{{idSubTopik}}
Content-Type: application/json

{
    "nama_subtopics": "Struktur Sel (Revisi)",
    "deskripsi": "<div><h3>Revisi Materi</h3><p>Tambahan: Mitokondria berfungsi sebagai tempat respirasi sel untuk menghasilkan energi (ATP).</p></div>"
}


### ==============================================
### 6. PINDAHKAN SUB-TOPIK KE TOPIK LAIN
### ==============================================
# Ganti id_topics dengan ID Topik tujuan baru
PUT {{baseUrl}}/subtopics/{{idSubTopik}}
Content-Type: application/json

{
    "id_topics": 2
}


### ==============================================
### 7. HAPUS SUB-TOPIK
### ==============================================
DELETE {{baseUrl}}/subtopics/{{idSubTopik}}
Content-Type: application/json